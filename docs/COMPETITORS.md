# SBP 競合調査

このドキュメントでは、画面の振る舞いをテキストベースで定義する既存のツール・プロトコルと、SBPのポジショニングを記載します。

---

## 既存ツール・プロトコル一覧

### 1. Server-Driven UI (SDUI) システム【ランタイム型】

サーバーからUI定義を配信し、クライアントで動的にレンダリングするアーキテクチャ。

| ツール | 開発元 | フォーマット | 特徴 |
|--------|--------|-------------|------|
| [DivKit](https://divkit.tech/) | Yandex | JSON | iOS/Android/Web対応、OSS |
| Ghost Platform | Airbnb | JSON | サーバーからUI定義を配信、内部ツール |
| LiquidUI | PhonePe | JSON | モバイル向けSDUI |
| Nativeblocks | - | - | ローコード＋SDUI |

**特徴**: ランタイムで実行されるため、アプリの再デプロイなしにUIを更新可能。ただし、クライアントSDKの実装が必要。

### 2. 宣言的UI仕様【標準規格型】

W3CやOASISなどの標準化団体で策定された（または提出された）仕様。

| 仕様 | 策定者 | フォーマット | 特徴 |
|------|--------|-------------|------|
| UIML | OASIS | XML | 2000年代初頭の標準化試み |
| UsiXML | W3C提出 | XML | マルチモーダルUI記述、学術的 |
| MARIA XML | W3C提出 | XML | 抽象UI→具象UIの変換モデル |
| [SCXML](https://www.w3.org/TR/scxml/) | W3C | XML | 状態機械のXML記述（UIに限らない） |

**特徴**: XMLベースで機械処理に適しているが、人間の可読性は低い。学術的な側面が強く、実務での採用例は限定的。

### 3. 状態管理・フォーム特化

UIの特定の側面に特化したツール。

| ツール | フォーマット | 特徴 |
|--------|-------------|------|
| [XState](https://xstate.js.org/) | JS/JSON | 状態機械のJS実装、ビジュアルエディタあり |
| [JSON Forms](https://jsonforms.io/) | JSON Schema | JSONスキーマからフォームUI生成 |

**特徴**: 状態管理やフォーム生成に特化しており、画面全体の記述には対応していない。

### 4. 新しいアプローチ

| 仕様 | フォーマット | 特徴 |
|------|-------------|------|
| [OpenUI Specification](https://openuispec.org/) | YAML/JSON | AI-native、実装非依存のUIコンポーネント定義 |

**特徴**: SBPに最も近いコンセプト。YAML/JSONでUIコンポーネントを抽象的に定義し、様々なフレームワークへの変換を想定。

---

## ポジショニングマップ

```
                    ランタイム実行
                         ↑
                         |
          DivKit    Ghost Platform
                         |
                         |
    JSON Forms  ←--------+--------→  XState
                         |
                         |
    UIML/UsiXML         |        OpenUI Spec
         ↓               ↓              ↓
                         |
                    設計ドキュメント
                         ↓
                        SBP
```

### 軸の説明

- **縦軸（ランタイム実行 ↔ 設計ドキュメント）**: 定義がランタイムで実行されるか、設計ドキュメントとして使用されるか
- **横軸（特化 ↔ 汎用）**: 特定の機能（状態管理、フォーム）に特化しているか、画面全体を記述できるか

---

## SBPの差別化ポイント

| 観点 | SBP | 競合 |
|------|-----|------|
| **用途** | 設計ドキュメント | ランタイム実行（SDUI）または学術仕様 |
| **フォーマット** | YAML（人間が読みやすい） | JSON/XML |
| **スコープ** | UI構造 + 状態 + 遷移 + アクション | 部分的（UIのみ、状態のみ等） |
| **画面遷移** | flows として第一級サポート | 限定的または非対応 |
| **フォーム** | form 専用型を提供 | 汎用的な状態として扱う |
| **実装マッピング** | MUI等へのマッピング定義を含む | 実装は利用者任せ |
| **AI親和性** | プロンプトに渡してコード生成可能 | 考慮されていない |

### SBPが選ばれる理由

1. **設計と実装の橋渡し**: Figmaでは表現しにくい「振る舞い」を記述し、AIでコード生成
2. **チーム間のコミュニケーション**: デザイナー・エンジニア間で画面仕様を共有
3. **変更の追跡**: Git管理でき、差分が明確
4. **ドキュメントとしての価値**: 実装とは独立して仕様を管理

---

## 参考リンク

- DivKit: https://divkit.tech/
- OpenUI Spec: https://openuispec.org/
- XState: https://xstate.js.org/
- JSON Forms: https://jsonforms.io/
- SCXML (W3C): https://www.w3.org/TR/scxml/

---

## 更新履歴

- 2024-12: 初版作成
